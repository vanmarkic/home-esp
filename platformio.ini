; PlatformIO Configuration for home-esp
; Supports native (host) testing and ESP32 builds

[platformio]
default_envs = native
src_dir = lib
test_dir = test/native

; ==============================================================================
; Native environment - for unit testing on host machine
; ==============================================================================
[env:native]
platform = native
test_framework = googletest
build_flags =
    -std=c++17
    -Wall
    -Wextra
    -I lib/core
    -I mocks
    -DUNIT_TEST
lib_deps =
    googletest

; ==============================================================================
; ESP32 environment - for actual hardware
; ==============================================================================
[env:esp32]
platform = espressif32
board = esp32dev
framework = arduino
build_flags =
    -std=c++17
    -Wall
    -I lib/core
lib_deps =
    # Add ESP32-specific dependencies here
monitor_speed = 115200

; ==============================================================================
; ESP32-S3 environment - for S3 variants
; ==============================================================================
[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
build_flags =
    -std=c++17
    -Wall
    -I lib/core
lib_deps =
    # Add ESP32-S3-specific dependencies here
monitor_speed = 115200

; ==============================================================================
; ESP8266 environment - for legacy devices
; ==============================================================================
[env:esp8266]
platform = espressif8266
board = nodemcuv2
framework = arduino
build_flags =
    -std=c++17
    -Wall
    -I lib/core
lib_deps =
    # Add ESP8266-specific dependencies here
monitor_speed = 115200
